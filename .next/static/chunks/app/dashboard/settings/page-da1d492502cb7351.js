(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[455],{1212:function(e,a,s){Promise.resolve().then(s.bind(s,6500))},6500:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return SettingsPage}});var r=s(7437),t=s(2749),n=s(4033),c=s(2265),l=s(1396),i=s.n(l);function SettingsPage(){let{data:e,status:a}=(0,t.useSession)(),s=(0,n.useRouter)(),[l,d]=(0,c.useState)(null),[o,x]=(0,c.useState)(!0),[u,h]=(0,c.useState)(!1),[m,g]=(0,c.useState)("");async function loadPreferences(){try{let e=await fetch("/api/user/preferences");if(e.ok){let a=await e.json();d(a.preferences)}}catch(e){console.error("Erro ao carregar prefer\xeancias:",e)}finally{x(!1)}}async function savePreferences(){h(!0),g("");try{let e=await fetch("/api/user/preferences",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});e.ok?(g("Prefer\xeancias salvas com sucesso!"),setTimeout(()=>g(""),3e3)):g("Erro ao salvar prefer\xeancias")}catch(e){console.error("Erro ao salvar prefer\xeancias:",e),g("Erro ao salvar prefer\xeancias")}finally{h(!1)}}return((0,c.useEffect)(()=>{"unauthenticated"===a&&s.push("/")},[a,s]),(0,c.useEffect)(()=>{var a;(null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.id)&&loadPreferences()},[e]),"loading"===a||o)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Carregando..."})]})}):"unauthenticated"===a?null:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-6 py-4",children:[(0,r.jsx)(i(),{href:"/dashboard",className:"text-blue-600 hover:text-blue-700 flex items-center gap-2 mb-4",children:"â† Voltar"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Configura\xe7\xf5es"})]})}),(0,r.jsxs)("main",{className:"max-w-4xl mx-auto px-6 py-12",children:[m&&(0,r.jsx)("div",{className:"mb-6 p-4 rounded-lg ".concat(m.includes("sucesso")?"bg-green-50 text-green-800":"bg-red-50 text-red-800"),children:m}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow p-8",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Prefer\xeancias de Sincroniza\xe7\xe3o"}),l&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900",children:"Sincroniza\xe7\xe3o Autom\xe1tica"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Sincronizar dados automaticamente entre suas contas"})]}),(0,r.jsx)("input",{type:"checkbox",checked:l.sync_enabled,onChange:e=>d({...l,sync_enabled:e.target.checked}),className:"w-5 h-5 text-blue-600 rounded"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900",children:"Mesclar Duplicatas Automaticamente"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Detectar e mesclar contatos duplicados"})]}),(0,r.jsx)("input",{type:"checkbox",checked:l.auto_merge_duplicates,onChange:e=>d({...l,auto_merge_duplicates:e.target.checked}),className:"w-5 h-5 text-blue-600 rounded"})]}),(0,r.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,r.jsx)("label",{className:"block font-medium text-gray-900 mb-3",children:"N\xedvel de Privacidade"}),(0,r.jsxs)("select",{value:l.privacy_level,onChange:e=>d({...l,privacy_level:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",children:[(0,r.jsx)("option",{value:"private",children:"Privado (Apenas voc\xea)"}),(0,r.jsx)("option",{value:"protected",children:"Protegido (Contas conectadas)"}),(0,r.jsx)("option",{value:"public",children:"P\xfablico"})]})]}),(0,r.jsx)("div",{className:"flex gap-4 pt-4",children:(0,r.jsx)("button",{onClick:savePreferences,disabled:u,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition disabled:opacity-50",children:u?"Salvando...":"Salvar Prefer\xeancias"})})]})]}),(0,r.jsxs)("div",{className:"mt-8 bg-red-50 border-2 border-red-200 rounded-2xl p-8",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-red-900 mb-4",children:"Zona de Perigo"}),(0,r.jsx)("p",{className:"text-red-800 mb-4",children:"Estas a\xe7\xf5es s\xe3o irrevers\xedveis. Use com cuidado."}),(0,r.jsx)("button",{className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:"Deletar Conta"})]})]})]})}}},function(e){e.O(0,[749,251,971,472,744],function(){return e(e.s=1212)}),_N_E=e.O()}]);