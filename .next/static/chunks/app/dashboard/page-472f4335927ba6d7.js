(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{7306:function(e,s,a){Promise.resolve().then(a.bind(a,7943))},7943:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return DashboardPage}});var i=a(7437),l=a(2749),d=a(4033),r=a(2265),t=a(1396),n=a.n(t);function DashboardPage(){var e,s;let{data:a,status:t}=(0,l.useSession)(),o=(0,d.useRouter)(),[c,u]=(0,r.useState)(null),[m,x]=(0,r.useState)([]),[h,v]=(0,r.useState)(!0);async function loadUserData(){var e,s,i,l,d,r,t,n,o,c,m;try{let n=await fetch("/api/user/unified-profile");if(n.ok){let e=await n.json();u(e.user),x(e.providers||[])}else 503===n.status&&(console.warn("Supabase nao esta configurado. Usando dados da sessao."),u({id:null==a?void 0:null===(e=a.user)||void 0===e?void 0:e.id,email:null==a?void 0:null===(s=a.user)||void 0===s?void 0:s.email,name:null==a?void 0:null===(i=a.user)||void 0===i?void 0:i.name,unified_id:null==a?void 0:null===(l=a.user)||void 0===l?void 0:l.unifiedId,created_at:new Date().toISOString()}),x((null==a?void 0:null===(d=a.user)||void 0===d?void 0:d.provider)?[{id:"1",provider:a.user.provider,provider_email:null==a?void 0:null===(r=a.user)||void 0===r?void 0:r.email,provider_name:null==a?void 0:null===(t=a.user)||void 0===t?void 0:t.name}]:[]))}catch(e){console.error("Erro ao carregar dados do usuario:",e),u({id:null==a?void 0:null===(n=a.user)||void 0===n?void 0:n.id,email:null==a?void 0:null===(o=a.user)||void 0===o?void 0:o.email,name:null==a?void 0:null===(c=a.user)||void 0===c?void 0:c.name,unified_id:null==a?void 0:null===(m=a.user)||void 0===m?void 0:m.unifiedId,created_at:new Date().toISOString()})}finally{v(!1)}}return((0,r.useEffect)(()=>{"unauthenticated"===t&&o.push("/")},[t,o]),(0,r.useEffect)(()=>{var e;(null==a?void 0:null===(e=a.user)||void 0===e?void 0:e.id)&&loadUserData()},[a]),"loading"===t||h)?(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin mx-auto mb-4"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Carregando..."})]})}):"unauthenticated"===t?null:(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,i.jsx)("header",{className:"bg-white shadow",children:(0,i.jsxs)("div",{className:"max-w-6xl mx-auto px-6 py-4 flex justify-between items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"OneSelf"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Dashboard"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsx)("p",{className:"font-medium text-gray-900",children:null==a?void 0:null===(e=a.user)||void 0===e?void 0:e.name}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:null==a?void 0:null===(s=a.user)||void 0===s?void 0:s.email})]}),(0,i.jsx)("button",{onClick:()=>(0,l.signOut)({callbackUrl:"/"}),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:"Sair"})]})]})}),(0,i.jsxs)("main",{className:"max-w-6xl mx-auto px-6 py-12",children:[(0,i.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl shadow-lg p-8 text-white mb-8",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Seu ID Unificado"}),(0,i.jsx)("p",{className:"text-blue-100 mb-4",children:"Todos os seus dados estao sincronizados em um unico perfil seguro"}),c&&(0,i.jsx)("div",{className:"bg-white bg-opacity-20 rounded-lg p-4 font-mono text-sm break-all",children:c.unified_id})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contas Conectadas"}),(0,i.jsx)("div",{className:"space-y-3",children:m.length>0?m.map(e=>(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsxs)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center text-lg",children:["google"===e.provider&&"\uD83D\uDD35","azure-ad"===e.provider&&"⬜","apple"===e.provider&&"\uD83C\uDF4E","credentials"===e.provider&&"\uD83D\uDD10"]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900 capitalize",children:e.provider}),(0,i.jsx)("p",{className:"text-xs text-gray-600",children:e.provider_email||e.provider_name||"Conectado"})]})]}),(0,i.jsx)("span",{className:"text-green-600 text-sm font-medium",children:"✓ Ativo"})]},e.id)):(0,i.jsx)("p",{className:"text-gray-600 text-sm",children:"Nenhuma conta conectada"})}),(0,i.jsx)(n(),{href:"/dashboard/connect-account",className:"mt-4 block w-full text-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Conectar Nova Conta"})]}),(0,i.jsxs)("div",{className:"bg-white rounded-2xl shadow p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informacoes do Perfil"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Email Principal"}),(0,i.jsx)("p",{className:"font-medium text-gray-900",children:null==c?void 0:c.email})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Nome"}),(0,i.jsx)("p",{className:"font-medium text-gray-900",children:(null==c?void 0:c.name)||"Nao definido"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Membro Desde"}),(0,i.jsx)("p",{className:"font-medium text-gray-900",children:(null==c?void 0:c.created_at)?new Date(c.created_at).toLocaleDateString("pt-BR"):"Hoje"})]})]}),(0,i.jsx)(n(),{href:"/dashboard/settings",className:"mt-4 block w-full text-center px-4 py-2 bg-gray-200 text-gray-900 rounded-lg hover:bg-gray-300 transition",children:"Editar Perfil"})]})]}),(0,i.jsxs)("div",{className:"mt-12 bg-blue-50 border border-blue-200 rounded-2xl p-8",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Como funciona o OneSelf?"}),(0,i.jsx)("p",{className:"text-gray-700 mb-4",children:"O OneSelf unifica suas multiplas identidades digitais em um unico perfil. Voce pode conectar suas contas do Google, Microsoft e Apple, e todos os seus dados serao sincronizados e gerenciados de forma segura."}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsx)("a",{href:"#",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Documentacao"}),(0,i.jsx)("a",{href:"#",className:"px-4 py-2 border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 transition",children:"Suporte"})]})]})]})]})}}},function(e){e.O(0,[749,251,971,472,744],function(){return e(e.s=7306)}),_N_E=e.O()}]);