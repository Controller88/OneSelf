"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/auth/[...nextauth]/route";
exports.ids = ["app/api/auth/[...nextauth]/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&page=%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute.js&appDir=%2Fworkspaces%2FOneSelf%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2FOneSelf&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&page=%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute.js&appDir=%2Fworkspaces%2FOneSelf%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2FOneSelf&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var _workspaces_OneSelf_app_api_auth_nextauth_route_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/api/auth/[...nextauth]/route.js */ \"(rsc)/./app/api/auth/[...nextauth]/route.js\");\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/auth/[...nextauth]/route\",\n        pathname: \"/api/auth/[...nextauth]\",\n        filename: \"route\",\n        bundlePath: \"app/api/auth/[...nextauth]/route\"\n    },\n    resolvedPagePath: \"/workspaces/OneSelf/app/api/auth/[...nextauth]/route.js\",\n    nextConfigOutput,\n    userland: _workspaces_OneSelf_app_api_auth_nextauth_route_js__WEBPACK_IMPORTED_MODULE_2__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/auth/[...nextauth]/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhdXRoJTJGJTVCLi4ubmV4dGF1dGglNUQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRmF1dGglMkYlNUIuLi5uZXh0YXV0aCU1RCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRmF1dGglMkYlNUIuLi5uZXh0YXV0aCU1RCUyRnJvdXRlLmpzJmFwcERpcj0lMkZ3b3Jrc3BhY2VzJTJGT25lU2VsZiUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGd29ya3NwYWNlcyUyRk9uZVNlbGYmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ3FCO0FBQ3BGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsdUdBQXVHO0FBQy9HO0FBQ2lKOztBQUVqSiIsInNvdXJjZXMiOlsid2VicGFjazovL29uZXNlbGYvPzM3MTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL3dvcmtzcGFjZXMvT25lU2VsZi9hcHAvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9yb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hdXRoL1suLi5uZXh0YXV0aF0vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvd29ya3NwYWNlcy9PbmVTZWxmL2FwcC9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdL3JvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9yb3V0ZVwiO1xuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBoZWFkZXJIb29rcywgc3RhdGljR2VuZXJhdGlvbkJhaWxvdXQsIG9yaWdpbmFsUGF0aG5hbWUsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&page=%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute.js&appDir=%2Fworkspaces%2FOneSelf%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2FOneSelf&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/auth/[...nextauth]/route.js":
/*!*********************************************!*\
  !*** ./app/api/auth/[...nextauth]/route.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ handler),\n/* harmony export */   POST: () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.js\");\n// app/api/auth/[...nextauth]/route.js\n\n\n// --- DEBUG CRÍTICO: \n// Isto deve garantir que o handler é criado com o NEXTAUTH_URL correto\nif (process.env.NEXTAUTH_URL) {\n    console.log(\"NEXTAUTH_URL (Lido na Rota):\", process.env.NEXTAUTH_URL);\n} else {\n    console.error(\"ERRO CR\\xcdTICO: NEXTAUTH_URL n\\xe3o est\\xe1 definido!\");\n}\n// --- FIM DEBUG\nconst handler = next_auth__WEBPACK_IMPORTED_MODULE_0___default()(_lib_auth__WEBPACK_IMPORTED_MODULE_1__.authOptions);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9yb3V0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLHNDQUFzQztBQUVMO0FBQ1E7QUFFekMsc0JBQXNCO0FBQ3RCLHVFQUF1RTtBQUN2RSxJQUFJRSxRQUFRQyxHQUFHLENBQUNDLFlBQVksRUFBRTtJQUMxQkMsUUFBUUMsR0FBRyxDQUFDLGdDQUFnQ0osUUFBUUMsR0FBRyxDQUFDQyxZQUFZO0FBQ3hFLE9BQU87SUFDSEMsUUFBUUUsS0FBSyxDQUFDO0FBQ2xCO0FBQ0EsZ0JBQWdCO0FBRWhCLE1BQU1DLFVBQVVSLGdEQUFRQSxDQUFDQyxrREFBV0E7QUFFTyIsInNvdXJjZXMiOlsid2VicGFjazovL29uZXNlbGYvLi9hcHAvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS9yb3V0ZS5qcz9kYTFhIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGFwcC9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdL3JvdXRlLmpzXG5cbmltcG9ydCBOZXh0QXV0aCBmcm9tIFwibmV4dC1hdXRoXCI7XG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gXCJAL2xpYi9hdXRoXCI7IFxuXG4vLyAtLS0gREVCVUcgQ1LDjVRJQ086IFxuLy8gSXN0byBkZXZlIGdhcmFudGlyIHF1ZSBvIGhhbmRsZXIgw6kgY3JpYWRvIGNvbSBvIE5FWFRBVVRIX1VSTCBjb3JyZXRvXG5pZiAocHJvY2Vzcy5lbnYuTkVYVEFVVEhfVVJMKSB7XG4gICAgY29uc29sZS5sb2coXCJORVhUQVVUSF9VUkwgKExpZG8gbmEgUm90YSk6XCIsIHByb2Nlc3MuZW52Lk5FWFRBVVRIX1VSTCk7XG59IGVsc2Uge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFUlJPIENSw41USUNPOiBORVhUQVVUSF9VUkwgbsOjbyBlc3TDoSBkZWZpbmlkbyFcIik7XG59XG4vLyAtLS0gRklNIERFQlVHXG5cbmNvbnN0IGhhbmRsZXIgPSBOZXh0QXV0aChhdXRoT3B0aW9ucyk7XG5cbmV4cG9ydCB7IGhhbmRsZXIgYXMgR0VULCBoYW5kbGVyIGFzIFBPU1QgfTsiXSwibmFtZXMiOlsiTmV4dEF1dGgiLCJhdXRoT3B0aW9ucyIsInByb2Nlc3MiLCJlbnYiLCJORVhUQVVUSF9VUkwiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJoYW5kbGVyIiwiR0VUIiwiUE9TVCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/auth/[...nextauth]/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/auth.js":
/*!*********************!*\
  !*** ./lib/auth.js ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/google */ \"(rsc)/./node_modules/next-auth/providers/google.js\");\n/* harmony import */ var next_auth_providers_azure_ad__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/azure-ad */ \"(rsc)/./node_modules/next-auth/providers/azure-ad.js\");\n/* harmony import */ var next_auth_providers_apple__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-auth/providers/apple */ \"(rsc)/./node_modules/next-auth/providers/apple.js\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next-auth/providers/credentials */ \"(rsc)/./node_modules/next-auth/providers/credentials.js\");\n/* harmony import */ var _supabaseUtils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./supabaseUtils */ \"(rsc)/./lib/supabaseUtils.js\");\n/* harmony import */ var _unifiedUserUtils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./unifiedUserUtils */ \"(rsc)/./lib/unifiedUserUtils.js\");\n\n\n\n\n\n// Funcoes utilitarias do Supabase para o fluxo de credenciais\n\n\n/**\n * Opções de Configuração do NextAuth\n * @type {NextAuthOptions}\n */ const authOptions = {\n    // 1. ADAPTER - REMOVIDO para forçar o uso de JWT e evitar conflitos.\n    // adapter: SupabaseAdapter({\n    //     url: process.env.NEXT_PUBLIC_SUPABASE_URL,\n    //     secret: process.env.SUPABASE_SERVICE_ROLE_KEY,\n    // }),\n    // 2. PROVIDERS - Define os métodos de login\n    providers: [\n        // Provedor de Credenciais (Email e Senha) - MANTIDO\n        (0,next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_4__[\"default\"])({\n            name: \"Credenciais\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Senha\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials.password) {\n                    return null;\n                }\n                // Tenta logar usando as credenciais e a função utilitária\n                const user = await (0,_supabaseUtils__WEBPACK_IMPORTED_MODULE_5__.signInWithSupabaseCredentials)(credentials.email, credentials.password);\n                // Retorna o objeto user se o login for bem-sucedido\n                if (user) {\n                    return user;\n                } else {\n                    return null;\n                }\n            }\n        }),\n        // Provedor Google (OAuth) - MANTIDO\n        (0,next_auth_providers_google__WEBPACK_IMPORTED_MODULE_1__[\"default\"])({\n            clientId: process.env.GOOGLE_CLIENT_ID,\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET\n        }),\n        // Provedor Microsoft (Azure AD) - NOVO\n        (0,next_auth_providers_azure_ad__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n            clientId: process.env.MICROSOFT_CLIENT_ID,\n            clientSecret: process.env.MICROSOFT_CLIENT_SECRET,\n            tenantId: process.env.MICROSOFT_TENANT_ID || \"common\"\n        }),\n        // Provedor Apple - NOVO\n        (0,next_auth_providers_apple__WEBPACK_IMPORTED_MODULE_3__[\"default\"])({\n            clientId: process.env.APPLE_CLIENT_ID,\n            clientSecret: process.env.APPLE_CLIENT_SECRET\n        })\n    ],\n    // 3. CONFIGURAÇÕES DA SESSÃO\n    session: {\n        strategy: \"jwt\"\n    },\n    // 4. PAGES (MANTIDO)\n    pages: {\n        signIn: \"/\",\n        error: \"/auth/error\"\n    },\n    // 5. CALLBACKS (MODIFICADO para incluir lógica de unificação com fallback)\n    callbacks: {\n        // Callback signIn - Implementa a lógica de unificação de ID\n        async signIn ({ user, account, profile }) {\n            try {\n                if (!user.email) {\n                    console.error(\"Email n\\xe3o dispon\\xedvel no perfil do usu\\xe1rio\");\n                    return false;\n                }\n                // Verificar se o Supabase está configurado\n                const supabaseUrl = process.env.SUPABASE_URL;\n                const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\n                if (!supabaseUrl || !supabaseServiceKey) {\n                    // FALLBACK: Se o Supabase não está configurado, permitir login com dados mínimos\n                    console.warn(\"⚠️ Supabase n\\xe3o est\\xe1 configurado. Usando modo de fallback para testes.\");\n                    // Gerar um ID unificado simples para testes\n                    const unifiedId = `unify_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n                    user.id = user.email; // Usar email como ID temporário\n                    user.unifiedId = unifiedId;\n                    return true;\n                }\n                // Se o Supabase está configurado, usar a lógica completa\n                const unifiedUser = await (0,_unifiedUserUtils__WEBPACK_IMPORTED_MODULE_6__.getOrCreateUnifiedUser)(user.email, {\n                    name: user.name || profile?.name,\n                    image: user.image || profile?.image\n                });\n                if (!unifiedUser) {\n                    console.error(\"Falha ao criar ou obter usu\\xe1rio unificado\");\n                    return false;\n                }\n                // Vincular o provedor ao usuário unificado\n                if (account) {\n                    await (0,_unifiedUserUtils__WEBPACK_IMPORTED_MODULE_6__.linkProviderToUser)(unifiedUser.id, account.provider, account.providerAccountId, {\n                        email: user.email,\n                        name: user.name || profile?.name,\n                        image: user.image || profile?.image\n                    });\n                }\n                // Atualizar o objeto user com o ID unificado\n                user.id = unifiedUser.id;\n                user.unifiedId = unifiedUser.unified_id;\n                return true;\n            } catch (error) {\n                console.error(\"Erro no callback signIn:\", error);\n                return false;\n            }\n        },\n        // Callback para adicionar o ID do usuário ao JWT\n        async jwt ({ token, user, account }) {\n            if (user) {\n                token.id = user.id;\n                token.unifiedId = user.unifiedId;\n                token.email = user.email;\n                token.provider = account?.provider;\n            }\n            return token;\n        },\n        // Callback para adicionar o ID do usuário à sessão\n        async session ({ session, token }) {\n            if (token) {\n                session.user.id = token.id;\n                session.user.unifiedId = token.unifiedId;\n                session.user.email = token.email;\n                session.user.provider = token.provider;\n            }\n            return session;\n        }\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MUJyQixRQUFRYixJQUFJLENBQUMyQixTQUFTLEdBQUdjLE1BQU1kLFNBQVM7Z0JBQ3hDZCxRQUFRYixJQUFJLENBQUNMLEtBQUssR0FBRzhDLE1BQU05QyxLQUFLO2dCQUNoQ2tCLFFBQVFiLElBQUksQ0FBQ3FDLFFBQVEsR0FBR0ksTUFBTUosUUFBUTtZQUMxQztZQUNBLE9BQU94QjtRQUNYO0lBQ0o7QUFDSixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25lc2VsZi8uL2xpYi9hdXRoLmpzPzI4N2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEF1dGhPcHRpb25zIH0gZnJvbSAnbmV4dC1hdXRoJztcbmltcG9ydCBHb29nbGVQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2dvb2dsZSc7XG5pbXBvcnQgQXp1cmVBRFByb3ZpZGVyIGZyb20gJ25leHQtYXV0aC9wcm92aWRlcnMvYXp1cmUtYWQnO1xuaW1wb3J0IEFwcGxlUHJvdmlkZXIgZnJvbSAnbmV4dC1hdXRoL3Byb3ZpZGVycy9hcHBsZSc7XG5pbXBvcnQgQ3JlZGVudGlhbHNQcm92aWRlciBmcm9tICduZXh0LWF1dGgvcHJvdmlkZXJzL2NyZWRlbnRpYWxzJztcblxuLy8gRnVuY29lcyB1dGlsaXRhcmlhcyBkbyBTdXBhYmFzZSBwYXJhIG8gZmx1eG8gZGUgY3JlZGVuY2lhaXNcbmltcG9ydCB7IHNpZ25JbldpdGhTdXBhYmFzZUNyZWRlbnRpYWxzIH0gZnJvbSAnLi9zdXBhYmFzZVV0aWxzJztcbmltcG9ydCB7IGdldE9yQ3JlYXRlVW5pZmllZFVzZXIsIGxpbmtQcm92aWRlclRvVXNlciB9IGZyb20gJy4vdW5pZmllZFVzZXJVdGlscyc7XG5cbi8qKlxuICogT3DDp8O1ZXMgZGUgQ29uZmlndXJhw6fDo28gZG8gTmV4dEF1dGhcbiAqIEB0eXBlIHtOZXh0QXV0aE9wdGlvbnN9XG4gKi9cbmV4cG9ydCBjb25zdCBhdXRoT3B0aW9ucyA9IHtcbiAgICAvLyAxLiBBREFQVEVSIC0gUkVNT1ZJRE8gcGFyYSBmb3LDp2FyIG8gdXNvIGRlIEpXVCBlIGV2aXRhciBjb25mbGl0b3MuXG4gICAgLy8gYWRhcHRlcjogU3VwYWJhc2VBZGFwdGVyKHtcbiAgICAvLyAgICAgdXJsOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwsXG4gICAgLy8gICAgIHNlY3JldDogcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSxcbiAgICAvLyB9KSxcblxuICAgIC8vIDIuIFBST1ZJREVSUyAtIERlZmluZSBvcyBtw6l0b2RvcyBkZSBsb2dpblxuICAgIHByb3ZpZGVyczogW1xuICAgICAgICAvLyBQcm92ZWRvciBkZSBDcmVkZW5jaWFpcyAoRW1haWwgZSBTZW5oYSkgLSBNQU5USURPXG4gICAgICAgIENyZWRlbnRpYWxzUHJvdmlkZXIoe1xuICAgICAgICAgICAgbmFtZTogJ0NyZWRlbmNpYWlzJyxcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzOiB7XG4gICAgICAgICAgICAgICAgZW1haWw6IHsgbGFiZWw6ICdFbWFpbCcsIHR5cGU6ICdlbWFpbCcgfSxcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogeyBsYWJlbDogJ1NlbmhhJywgdHlwZTogJ3Bhc3N3b3JkJyB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xuICAgICAgICAgICAgICAgIGlmICghY3JlZGVudGlhbHM/LmVtYWlsIHx8ICFjcmVkZW50aWFscy5wYXNzd29yZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBUZW50YSBsb2dhciB1c2FuZG8gYXMgY3JlZGVuY2lhaXMgZSBhIGZ1bsOnw6NvIHV0aWxpdMOhcmlhXG4gICAgICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHNpZ25JbldpdGhTdXBhYmFzZUNyZWRlbnRpYWxzKFxuICAgICAgICAgICAgICAgICAgICBjcmVkZW50aWFscy5lbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgY3JlZGVudGlhbHMucGFzc3dvcmRcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgLy8gUmV0b3JuYSBvIG9iamV0byB1c2VyIHNlIG8gbG9naW4gZm9yIGJlbS1zdWNlZGlkb1xuICAgICAgICAgICAgICAgIGlmICh1c2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1c2VyO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgICAvLyBQcm92ZWRvciBHb29nbGUgKE9BdXRoKSAtIE1BTlRJRE9cbiAgICAgICAgR29vZ2xlUHJvdmlkZXIoe1xuICAgICAgICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQsXG4gICAgICAgICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfU0VDUkVULFxuICAgICAgICB9KSxcbiAgICAgICAgLy8gUHJvdmVkb3IgTWljcm9zb2Z0IChBenVyZSBBRCkgLSBOT1ZPXG4gICAgICAgIEF6dXJlQURQcm92aWRlcih7XG4gICAgICAgICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuTUlDUk9TT0ZUX0NMSUVOVF9JRCxcbiAgICAgICAgICAgIGNsaWVudFNlY3JldDogcHJvY2Vzcy5lbnYuTUlDUk9TT0ZUX0NMSUVOVF9TRUNSRVQsXG4gICAgICAgICAgICB0ZW5hbnRJZDogcHJvY2Vzcy5lbnYuTUlDUk9TT0ZUX1RFTkFOVF9JRCB8fCAnY29tbW9uJyxcbiAgICAgICAgfSksXG4gICAgICAgIC8vIFByb3ZlZG9yIEFwcGxlIC0gTk9WT1xuICAgICAgICBBcHBsZVByb3ZpZGVyKHtcbiAgICAgICAgICAgIGNsaWVudElkOiBwcm9jZXNzLmVudi5BUFBMRV9DTElFTlRfSUQsXG4gICAgICAgICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkFQUExFX0NMSUVOVF9TRUNSRVQsXG4gICAgICAgIH0pLFxuICAgIF0sXG5cbiAgICAvLyAzLiBDT05GSUdVUkHDh8OVRVMgREEgU0VTU8ODT1xuICAgIHNlc3Npb246IHtcbiAgICAgICAgc3RyYXRlZ3k6ICdqd3QnLCAvLyBNQU5USURPXG4gICAgfSxcbiAgICBcbiAgICAvLyA0LiBQQUdFUyAoTUFOVElETylcbiAgICBwYWdlczoge1xuICAgICAgICBzaWduSW46ICcvJywgXG4gICAgICAgIGVycm9yOiAnL2F1dGgvZXJyb3InLCBcbiAgICB9LFxuICAgIFxuICAgIC8vIDUuIENBTExCQUNLUyAoTU9ESUZJQ0FETyBwYXJhIGluY2x1aXIgbMOzZ2ljYSBkZSB1bmlmaWNhw6fDo28gY29tIGZhbGxiYWNrKVxuICAgIGNhbGxiYWNrczoge1xuICAgICAgICAvLyBDYWxsYmFjayBzaWduSW4gLSBJbXBsZW1lbnRhIGEgbMOzZ2ljYSBkZSB1bmlmaWNhw6fDo28gZGUgSURcbiAgICAgICAgYXN5bmMgc2lnbkluKHsgdXNlciwgYWNjb3VudCwgcHJvZmlsZSB9KSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICghdXNlci5lbWFpbCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFbWFpbCBuw6NvIGRpc3BvbsOtdmVsIG5vIHBlcmZpbCBkbyB1c3XDoXJpbycpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gVmVyaWZpY2FyIHNlIG8gU3VwYWJhc2UgZXN0w6EgY29uZmlndXJhZG9cbiAgICAgICAgICAgICAgICBjb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1VSTDtcbiAgICAgICAgICAgICAgICBjb25zdCBzdXBhYmFzZVNlcnZpY2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VTZXJ2aWNlS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZBTExCQUNLOiBTZSBvIFN1cGFiYXNlIG7Do28gZXN0w6EgY29uZmlndXJhZG8sIHBlcm1pdGlyIGxvZ2luIGNvbSBkYWRvcyBtw61uaW1vc1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBTdXBhYmFzZSBuw6NvIGVzdMOhIGNvbmZpZ3VyYWRvLiBVc2FuZG8gbW9kbyBkZSBmYWxsYmFjayBwYXJhIHRlc3Rlcy4nKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIEdlcmFyIHVtIElEIHVuaWZpY2FkbyBzaW1wbGVzIHBhcmEgdGVzdGVzXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVuaWZpZWRJZCA9IGB1bmlmeV8ke0RhdGUubm93KCl9XyR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpfWA7XG4gICAgICAgICAgICAgICAgICAgIHVzZXIuaWQgPSB1c2VyLmVtYWlsOyAvLyBVc2FyIGVtYWlsIGNvbW8gSUQgdGVtcG9yw6FyaW9cbiAgICAgICAgICAgICAgICAgICAgdXNlci51bmlmaWVkSWQgPSB1bmlmaWVkSWQ7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBTZSBvIFN1cGFiYXNlIGVzdMOhIGNvbmZpZ3VyYWRvLCB1c2FyIGEgbMOzZ2ljYSBjb21wbGV0YVxuICAgICAgICAgICAgICAgIGNvbnN0IHVuaWZpZWRVc2VyID0gYXdhaXQgZ2V0T3JDcmVhdGVVbmlmaWVkVXNlcih1c2VyLmVtYWlsLCB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSB8fCBwcm9maWxlPy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBpbWFnZTogdXNlci5pbWFnZSB8fCBwcm9maWxlPy5pbWFnZSxcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmICghdW5pZmllZFVzZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFsaGEgYW8gY3JpYXIgb3Ugb2J0ZXIgdXN1w6FyaW8gdW5pZmljYWRvJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBWaW5jdWxhciBvIHByb3ZlZG9yIGFvIHVzdcOhcmlvIHVuaWZpY2Fkb1xuICAgICAgICAgICAgICAgIGlmIChhY2NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGxpbmtQcm92aWRlclRvVXNlcihcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuaWZpZWRVc2VyLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudC5wcm92aWRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQucHJvdmlkZXJBY2NvdW50SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdXNlci5uYW1lIHx8IHByb2ZpbGU/Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2U6IHVzZXIuaW1hZ2UgfHwgcHJvZmlsZT8uaW1hZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQXR1YWxpemFyIG8gb2JqZXRvIHVzZXIgY29tIG8gSUQgdW5pZmljYWRvXG4gICAgICAgICAgICAgICAgdXNlci5pZCA9IHVuaWZpZWRVc2VyLmlkO1xuICAgICAgICAgICAgICAgIHVzZXIudW5pZmllZElkID0gdW5pZmllZFVzZXIudW5pZmllZF9pZDtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvIG5vIGNhbGxiYWNrIHNpZ25JbjonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAvLyBDYWxsYmFjayBwYXJhIGFkaWNpb25hciBvIElEIGRvIHVzdcOhcmlvIGFvIEpXVFxuICAgICAgICBhc3luYyBqd3QoeyB0b2tlbiwgdXNlciwgYWNjb3VudCB9KSB7XG4gICAgICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgICAgICAgIHRva2VuLmlkID0gdXNlci5pZDtcbiAgICAgICAgICAgICAgICB0b2tlbi51bmlmaWVkSWQgPSB1c2VyLnVuaWZpZWRJZDtcbiAgICAgICAgICAgICAgICB0b2tlbi5lbWFpbCA9IHVzZXIuZW1haWw7XG4gICAgICAgICAgICAgICAgdG9rZW4ucHJvdmlkZXIgPSBhY2NvdW50Py5wcm92aWRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0b2tlbjtcbiAgICAgICAgfSxcbiAgICAgICAgLy8gQ2FsbGJhY2sgcGFyYSBhZGljaW9uYXIgbyBJRCBkbyB1c3XDoXJpbyDDoCBzZXNzw6NvXG4gICAgICAgIGFzeW5jIHNlc3Npb24oeyBzZXNzaW9uLCB0b2tlbiB9KSB7XG4gICAgICAgICAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgICAgICAgICBzZXNzaW9uLnVzZXIuaWQgPSB0b2tlbi5pZDtcbiAgICAgICAgICAgICAgICBzZXNzaW9uLnVzZXIudW5pZmllZElkID0gdG9rZW4udW5pZmllZElkO1xuICAgICAgICAgICAgICAgIHNlc3Npb24udXNlci5lbWFpbCA9IHRva2VuLmVtYWlsO1xuICAgICAgICAgICAgICAgIHNlc3Npb24udXNlci5wcm92aWRlciA9IHRva2VuLnByb3ZpZGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgICAgIH0sXG4gICAgfSxcbn07XG4iXSwibmFtZXMiOlsiTmV4dEF1dGhPcHRpb25zIiwiR29vZ2xlUHJvdmlkZXIiLCJBenVyZUFEUHJvdmlkZXIiLCJBcHBsZVByb3ZpZGVyIiwiQ3JlZGVudGlhbHNQcm92aWRlciIsInNpZ25JbldpdGhTdXBhYmFzZUNyZWRlbnRpYWxzIiwiZ2V0T3JDcmVhdGVVbmlmaWVkVXNlciIsImxpbmtQcm92aWRlclRvVXNlciIsImF1dGhPcHRpb25zIiwicHJvdmlkZXJzIiwibmFtZSIsImNyZWRlbnRpYWxzIiwiZW1haWwiLCJsYWJlbCIsInR5cGUiLCJwYXNzd29yZCIsImF1dGhvcml6ZSIsInVzZXIiLCJjbGllbnRJZCIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfQ0xJRU5UX0lEIiwiY2xpZW50U2VjcmV0IiwiR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJNSUNST1NPRlRfQ0xJRU5UX0lEIiwiTUlDUk9TT0ZUX0NMSUVOVF9TRUNSRVQiLCJ0ZW5hbnRJZCIsIk1JQ1JPU09GVF9URU5BTlRfSUQiLCJBUFBMRV9DTElFTlRfSUQiLCJBUFBMRV9DTElFTlRfU0VDUkVUIiwic2Vzc2lvbiIsInN0cmF0ZWd5IiwicGFnZXMiLCJzaWduSW4iLCJlcnJvciIsImNhbGxiYWNrcyIsImFjY291bnQiLCJwcm9maWxlIiwiY29uc29sZSIsInN1cGFiYXNlVXJsIiwiU1VQQUJBU0VfVVJMIiwic3VwYWJhc2VTZXJ2aWNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIndhcm4iLCJ1bmlmaWVkSWQiLCJEYXRlIiwibm93IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyIiwiaWQiLCJ1bmlmaWVkVXNlciIsImltYWdlIiwicHJvdmlkZXIiLCJwcm92aWRlckFjY291bnRJZCIsInVuaWZpZWRfaWQiLCJqd3QiLCJ0b2tlbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.js\n");

/***/ }),

/***/ "(rsc)/./lib/supabaseUtils.js":
/*!******************************!*\
  !*** ./lib/supabaseUtils.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   signInWithSupabaseCredentials: () => (/* binding */ signInWithSupabaseCredentials)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/esm/wrapper.mjs\");\n\n// As variáveis de ambiente devem estar disponíveis aqui, mas o Next.js prefere a variável privada no backend\nconst supabaseUrl = process.env.SUPABASE_URL;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\n// Cria um cliente Supabase \"anônimo\" (sem Service Role) para o login do usuário\nconst supabase = supabaseUrl && supabaseAnonKey ? (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey) : null;\n/**\n * Tenta fazer login de um usuário usando email e senha diretamente com o Supabase.\n * @param {string} email\n * @param {string} password\n * @returns {object | null} Objeto de usuário do NextAuth ou null em caso de falha.\n */ async function signInWithSupabaseCredentials(email, password) {\n    if (!supabase) {\n        console.error(\"Supabase client n\\xe3o est\\xe1 dispon\\xedvel\");\n        return null;\n    }\n    const { data, error } = await supabase.auth.signInWithPassword({\n        email,\n        password\n    });\n    if (error) {\n        console.error(\"Erro de login no Supabase:\", error.message);\n        return null;\n    }\n    // Se o login for bem-sucedido, retorna o objeto de usuário do NextAuth\n    if (data.user) {\n        return {\n            id: data.user.id,\n            email: data.user.email,\n            name: data.user.email.split(\"@\")[0]\n        };\n    }\n    return null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2VVdGlscy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFxRDtBQUVyRCw2R0FBNkc7QUFDN0csTUFBTUMsY0FBY0MsUUFBUUMsR0FBRyxDQUFDQyxZQUFZO0FBQzVDLE1BQU1DLGtCQUFrQkgsUUFBUUMsR0FBRyxDQUFDRyw2QkFBNkI7QUFFakUsZ0ZBQWdGO0FBQ2hGLE1BQU1DLFdBQVdOLGVBQWVJLGtCQUFrQkwsbUVBQVlBLENBQUNDLGFBQWFJLG1CQUFtQjtBQUUvRjs7Ozs7Q0FLQyxHQUNNLGVBQWVHLDhCQUE4QkMsS0FBSyxFQUFFQyxRQUFRO0lBQy9ELElBQUksQ0FBQ0gsVUFBVTtRQUNYSSxRQUFRQyxLQUFLLENBQUM7UUFDZCxPQUFPO0lBQ1g7SUFDQSxNQUFNLEVBQUVDLElBQUksRUFBRUQsS0FBSyxFQUFFLEdBQUcsTUFBTUwsU0FBU08sSUFBSSxDQUFDQyxrQkFBa0IsQ0FBQztRQUMzRE47UUFDQUM7SUFDSjtJQUVBLElBQUlFLE9BQU87UUFDUEQsUUFBUUMsS0FBSyxDQUFDLDhCQUE4QkEsTUFBTUksT0FBTztRQUN6RCxPQUFPO0lBQ1g7SUFFQSx1RUFBdUU7SUFDdkUsSUFBSUgsS0FBS0ksSUFBSSxFQUFFO1FBQ1gsT0FBTztZQUNIQyxJQUFJTCxLQUFLSSxJQUFJLENBQUNDLEVBQUU7WUFDaEJULE9BQU9JLEtBQUtJLElBQUksQ0FBQ1IsS0FBSztZQUN0QlUsTUFBTU4sS0FBS0ksSUFBSSxDQUFDUixLQUFLLENBQUNXLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUN2QztJQUNKO0lBRUEsT0FBTztBQUNYIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb25lc2VsZi8uL2xpYi9zdXBhYmFzZVV0aWxzLmpzPzRjOTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcblxuLy8gQXMgdmFyacOhdmVpcyBkZSBhbWJpZW50ZSBkZXZlbSBlc3RhciBkaXNwb27DrXZlaXMgYXF1aSwgbWFzIG8gTmV4dC5qcyBwcmVmZXJlIGEgdmFyacOhdmVsIHByaXZhZGEgbm8gYmFja2VuZFxuY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9VUkw7IFxuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVk7XG5cbi8vIENyaWEgdW0gY2xpZW50ZSBTdXBhYmFzZSBcImFuw7RuaW1vXCIgKHNlbSBTZXJ2aWNlIFJvbGUpIHBhcmEgbyBsb2dpbiBkbyB1c3XDoXJpb1xuY29uc3Qgc3VwYWJhc2UgPSBzdXBhYmFzZVVybCAmJiBzdXBhYmFzZUFub25LZXkgPyBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSkgOiBudWxsO1xuXG4vKipcbiAqIFRlbnRhIGZhemVyIGxvZ2luIGRlIHVtIHVzdcOhcmlvIHVzYW5kbyBlbWFpbCBlIHNlbmhhIGRpcmV0YW1lbnRlIGNvbSBvIFN1cGFiYXNlLlxuICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFzc3dvcmRcbiAqIEByZXR1cm5zIHtvYmplY3QgfCBudWxsfSBPYmpldG8gZGUgdXN1w6FyaW8gZG8gTmV4dEF1dGggb3UgbnVsbCBlbSBjYXNvIGRlIGZhbGhhLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aFN1cGFiYXNlQ3JlZGVudGlhbHMoZW1haWwsIHBhc3N3b3JkKSB7XG4gICAgaWYgKCFzdXBhYmFzZSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBjbGllbnQgbsOjbyBlc3TDoSBkaXNwb27DrXZlbCcpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5zaWduSW5XaXRoUGFzc3dvcmQoe1xuICAgICAgICBlbWFpbCxcbiAgICAgICAgcGFzc3dvcmQsXG4gICAgfSk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJybyBkZSBsb2dpbiBubyBTdXBhYmFzZTonLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gU2UgbyBsb2dpbiBmb3IgYmVtLXN1Y2VkaWRvLCByZXRvcm5hIG8gb2JqZXRvIGRlIHVzdcOhcmlvIGRvIE5leHRBdXRoXG4gICAgaWYgKGRhdGEudXNlcikge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IGRhdGEudXNlci5pZCxcbiAgICAgICAgICAgIGVtYWlsOiBkYXRhLnVzZXIuZW1haWwsXG4gICAgICAgICAgICBuYW1lOiBkYXRhLnVzZXIuZW1haWwuc3BsaXQoJ0AnKVswXSwgLy8gTm9tZSBzaW1wbGVzXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG59Il0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIlNVUEFCQVNFX1VSTCIsInN1cGFiYXNlQW5vbktleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwic3VwYWJhc2UiLCJzaWduSW5XaXRoU3VwYWJhc2VDcmVkZW50aWFscyIsImVtYWlsIiwicGFzc3dvcmQiLCJjb25zb2xlIiwiZXJyb3IiLCJkYXRhIiwiYXV0aCIsInNpZ25JbldpdGhQYXNzd29yZCIsIm1lc3NhZ2UiLCJ1c2VyIiwiaWQiLCJuYW1lIiwic3BsaXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabaseUtils.js\n");

/***/ }),

/***/ "(rsc)/./lib/unifiedUserUtils.js":
/*!*********************************!*\
  !*** ./lib/unifiedUserUtils.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateUnifiedId: () => (/* binding */ generateUnifiedId),\n/* harmony export */   getOrCreateUnifiedUser: () => (/* binding */ getOrCreateUnifiedUser),\n/* harmony export */   getUnifiedUserByEmail: () => (/* binding */ getUnifiedUserByEmail),\n/* harmony export */   getUnifiedUserById: () => (/* binding */ getUnifiedUserById),\n/* harmony export */   getUserProviders: () => (/* binding */ getUserProviders),\n/* harmony export */   linkProviderToUser: () => (/* binding */ linkProviderToUser)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/esm/wrapper.mjs\");\n\n// Cria um cliente Supabase com a chave de service role (para operações do servidor)\nconst supabaseUrl = process.env.SUPABASE_URL;\nconst supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\nconst supabase = supabaseUrl && supabaseServiceKey ? (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseServiceKey) : null;\n/**\n * Gera um ID unificado único para o usuário\n * @returns {string} ID unificado no formato unify_TIMESTAMP_RANDOM\n */ function generateUnifiedId() {\n    const timestamp = Date.now();\n    const random = Math.random().toString(36).substr(2, 9);\n    return `unify_${timestamp}_${random}`;\n}\n/**\n * Obtém ou cria um usuário unificado baseado no email\n * @param {string} email - Email do usuário\n * @param {object} profile - Dados do perfil do usuário (name, image, etc)\n * @returns {object} Usuário unificado criado ou existente\n */ async function getOrCreateUnifiedUser(email, profile = {}) {\n    if (!supabase) {\n        console.error(\"Supabase client n\\xe3o est\\xe1 dispon\\xedvel\");\n        return null;\n    }\n    try {\n        // Verificar se o usuário já existe\n        const { data: existingUser, error: selectError } = await supabase.from(\"unified_users\").select(\"*\").eq(\"email\", email).single();\n        if (selectError && selectError.code !== \"PGRST116\") {\n            // PGRST116 significa \"nenhuma linha encontrada\", o que é esperado\n            console.error(\"Erro ao buscar usu\\xe1rio:\", selectError);\n            return null;\n        }\n        if (existingUser) {\n            // Usuário já existe, retornar\n            return existingUser;\n        }\n        // Criar novo usuário unificado\n        const unifiedId = generateUnifiedId();\n        const { data: newUser, error: insertError } = await supabase.from(\"unified_users\").insert([\n            {\n                email,\n                unified_id: unifiedId,\n                name: profile.name || email.split(\"@\")[0],\n                avatar_url: profile.image\n            }\n        ]).select().single();\n        if (insertError) {\n            console.error(\"Erro ao criar usu\\xe1rio unificado:\", insertError);\n            return null;\n        }\n        // Criar preferências padrão para o novo usuário\n        await supabase.from(\"user_preferences\").insert([\n            {\n                user_id: newUser.id,\n                sync_enabled: true,\n                auto_merge_duplicates: true,\n                privacy_level: \"private\"\n            }\n        ]);\n        return newUser;\n    } catch (error) {\n        console.error(\"Erro em getOrCreateUnifiedUser:\", error);\n        return null;\n    }\n}\n/**\n * Vincula um novo provedor a um usuário unificado existente\n * @param {string} userId - ID do usuário unificado\n * @param {string} provider - Nome do provedor (google, azure-ad, apple, etc)\n * @param {string} providerAccountId - ID da conta no provedor\n * @param {object} providerProfile - Dados do perfil do provedor\n * @returns {object} Registro do provedor vinculado\n */ async function linkProviderToUser(userId, provider, providerAccountId, providerProfile = {}) {\n    if (!supabase) {\n        console.error(\"Supabase client n\\xe3o est\\xe1 dispon\\xedvel\");\n        return null;\n    }\n    try {\n        // Verificar se este provedor já está vinculado\n        const { data: existingProvider, error: selectError } = await supabase.from(\"user_providers\").select(\"*\").eq(\"user_id\", userId).eq(\"provider\", provider).single();\n        if (selectError && selectError.code !== \"PGRST116\") {\n            console.error(\"Erro ao verificar provedor existente:\", selectError);\n            return null;\n        }\n        if (existingProvider) {\n            // Provedor já está vinculado\n            return existingProvider;\n        }\n        // Vincular novo provedor\n        const { data: linkedProvider, error: insertError } = await supabase.from(\"user_providers\").insert([\n            {\n                user_id: userId,\n                provider,\n                provider_account_id: providerAccountId,\n                provider_email: providerProfile.email,\n                provider_name: providerProfile.name,\n                provider_image: providerProfile.image\n            }\n        ]).select().single();\n        if (insertError) {\n            console.error(\"Erro ao vincular provedor:\", insertError);\n            return null;\n        }\n        return linkedProvider;\n    } catch (error) {\n        console.error(\"Erro em linkProviderToUser:\", error);\n        return null;\n    }\n}\n/**\n * Obtém todos os provedores vinculados a um usuário\n * @param {string} userId - ID do usuário unificado\n * @returns {array} Lista de provedores vinculados\n */ async function getUserProviders(userId) {\n    if (!supabase) {\n        console.error(\"Supabase client n\\xe3o est\\xe1 dispon\\xedvel\");\n        return [];\n    }\n    try {\n        const { data: providers, error } = await supabase.from(\"user_providers\").select(\"*\").eq(\"user_id\", userId);\n        if (error) {\n            console.error(\"Erro ao buscar provedores:\", error);\n            return [];\n        }\n        return providers || [];\n    } catch (error) {\n        console.error(\"Erro em getUserProviders:\", error);\n        return [];\n    }\n}\n/**\n * Obtém um usuário unificado pelo email\n * @param {string} email - Email do usuário\n * @returns {object} Usuário unificado\n */ async function getUnifiedUserByEmail(email) {\n    if (!supabase) {\n        console.error(\"Supabase client n\\xe3o est\\xe1 dispon\\xedvel\");\n        return null;\n    }\n    try {\n        const { data: user, error } = await supabase.from(\"unified_users\").select(\"*\").eq(\"email\", email).single();\n        if (error && error.code !== \"PGRST116\") {\n            console.error(\"Erro ao buscar usu\\xe1rio:\", error);\n            return null;\n        }\n        return user || null;\n    } catch (error) {\n        console.error(\"Erro em getUnifiedUserByEmail:\", error);\n        return null;\n    }\n}\n/**\n * Obtém um usuário unificado pelo ID\n * @param {string} userId - ID do usuário unificado\n * @returns {object} Usuário unificado com seus provedores\n */ async function getUnifiedUserById(userId) {\n    if (!supabase) {\n        console.error(\"Supabase client n\\xe3o est\\xe1 dispon\\xedvel\");\n        return null;\n    }\n    try {\n        const { data: user, error: userError } = await supabase.from(\"unified_users\").select(\"*\").eq(\"id\", userId).single();\n        if (userError) {\n            console.error(\"Erro ao buscar usu\\xe1rio:\", userError);\n            return null;\n        }\n        if (!user) return null;\n        // Buscar provedores vinculados\n        const providers = await getUserProviders(userId);\n        user.providers = providers;\n        return user;\n    } catch (error) {\n        console.error(\"Erro em getUnifiedUserById:\", error);\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Yi91bmlmaWVkVXNlclV0aWxzLmpzP2M5YjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcblxuLy8gQ3JpYSB1bSBjbGllbnRlIFN1cGFiYXNlIGNvbSBhIGNoYXZlIGRlIHNlcnZpY2Ugcm9sZSAocGFyYSBvcGVyYcOnw7VlcyBkbyBzZXJ2aWRvcilcbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfVVJMO1xuY29uc3Qgc3VwYWJhc2VTZXJ2aWNlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWTtcblxuY29uc3Qgc3VwYWJhc2UgPSBzdXBhYmFzZVVybCAmJiBzdXBhYmFzZVNlcnZpY2VLZXkgXG4gID8gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZVNlcnZpY2VLZXkpXG4gIDogbnVsbDtcblxuLyoqXG4gKiBHZXJhIHVtIElEIHVuaWZpY2FkbyDDum5pY28gcGFyYSBvIHVzdcOhcmlvXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBJRCB1bmlmaWNhZG8gbm8gZm9ybWF0byB1bmlmeV9USU1FU1RBTVBfUkFORE9NXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVVuaWZpZWRJZCgpIHtcbiAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgY29uc3QgcmFuZG9tID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDkpO1xuICByZXR1cm4gYHVuaWZ5XyR7dGltZXN0YW1wfV8ke3JhbmRvbX1gO1xufVxuXG4vKipcbiAqIE9idMOpbSBvdSBjcmlhIHVtIHVzdcOhcmlvIHVuaWZpY2FkbyBiYXNlYWRvIG5vIGVtYWlsXG4gKiBAcGFyYW0ge3N0cmluZ30gZW1haWwgLSBFbWFpbCBkbyB1c3XDoXJpb1xuICogQHBhcmFtIHtvYmplY3R9IHByb2ZpbGUgLSBEYWRvcyBkbyBwZXJmaWwgZG8gdXN1w6FyaW8gKG5hbWUsIGltYWdlLCBldGMpXG4gKiBAcmV0dXJucyB7b2JqZWN0fSBVc3XDoXJpbyB1bmlmaWNhZG8gY3JpYWRvIG91IGV4aXN0ZW50ZVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3JDcmVhdGVVbmlmaWVkVXNlcihlbWFpbCwgcHJvZmlsZSA9IHt9KSB7XG4gIGlmICghc3VwYWJhc2UpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBjbGllbnQgbsOjbyBlc3TDoSBkaXNwb27DrXZlbCcpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdHJ5IHtcbiAgICAvLyBWZXJpZmljYXIgc2UgbyB1c3XDoXJpbyBqw6EgZXhpc3RlXG4gICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ1VzZXIsIGVycm9yOiBzZWxlY3RFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1bmlmaWVkX3VzZXJzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmVxKCdlbWFpbCcsIGVtYWlsKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKHNlbGVjdEVycm9yICYmIHNlbGVjdEVycm9yLmNvZGUgIT09ICdQR1JTVDExNicpIHtcbiAgICAgIC8vIFBHUlNUMTE2IHNpZ25pZmljYSBcIm5lbmh1bWEgbGluaGEgZW5jb250cmFkYVwiLCBvIHF1ZSDDqSBlc3BlcmFkb1xuICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBidXNjYXIgdXN1w6FyaW86Jywgc2VsZWN0RXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGV4aXN0aW5nVXNlcikge1xuICAgICAgLy8gVXN1w6FyaW8gasOhIGV4aXN0ZSwgcmV0b3JuYXJcbiAgICAgIHJldHVybiBleGlzdGluZ1VzZXI7XG4gICAgfVxuXG4gICAgLy8gQ3JpYXIgbm92byB1c3XDoXJpbyB1bmlmaWNhZG9cbiAgICBjb25zdCB1bmlmaWVkSWQgPSBnZW5lcmF0ZVVuaWZpZWRJZCgpO1xuICAgIGNvbnN0IHsgZGF0YTogbmV3VXNlciwgZXJyb3I6IGluc2VydEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VuaWZpZWRfdXNlcnMnKVxuICAgICAgLmluc2VydChbXG4gICAgICAgIHtcbiAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICB1bmlmaWVkX2lkOiB1bmlmaWVkSWQsXG4gICAgICAgICAgbmFtZTogcHJvZmlsZS5uYW1lIHx8IGVtYWlsLnNwbGl0KCdAJylbMF0sXG4gICAgICAgICAgYXZhdGFyX3VybDogcHJvZmlsZS5pbWFnZSxcbiAgICAgICAgfSxcbiAgICAgIF0pXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChpbnNlcnRFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyBjcmlhciB1c3XDoXJpbyB1bmlmaWNhZG86JywgaW5zZXJ0RXJyb3IpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gQ3JpYXIgcHJlZmVyw6puY2lhcyBwYWRyw6NvIHBhcmEgbyBub3ZvIHVzdcOhcmlvXG4gICAgYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1c2VyX3ByZWZlcmVuY2VzJylcbiAgICAgIC5pbnNlcnQoW1xuICAgICAgICB7XG4gICAgICAgICAgdXNlcl9pZDogbmV3VXNlci5pZCxcbiAgICAgICAgICBzeW5jX2VuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgYXV0b19tZXJnZV9kdXBsaWNhdGVzOiB0cnVlLFxuICAgICAgICAgIHByaXZhY3lfbGV2ZWw6ICdwcml2YXRlJyxcbiAgICAgICAgfSxcbiAgICAgIF0pO1xuXG4gICAgcmV0dXJuIG5ld1VzZXI7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJybyBlbSBnZXRPckNyZWF0ZVVuaWZpZWRVc2VyOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIFZpbmN1bGEgdW0gbm92byBwcm92ZWRvciBhIHVtIHVzdcOhcmlvIHVuaWZpY2FkbyBleGlzdGVudGVcbiAqIEBwYXJhbSB7c3RyaW5nfSB1c2VySWQgLSBJRCBkbyB1c3XDoXJpbyB1bmlmaWNhZG9cbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm92aWRlciAtIE5vbWUgZG8gcHJvdmVkb3IgKGdvb2dsZSwgYXp1cmUtYWQsIGFwcGxlLCBldGMpXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvdmlkZXJBY2NvdW50SWQgLSBJRCBkYSBjb250YSBubyBwcm92ZWRvclxuICogQHBhcmFtIHtvYmplY3R9IHByb3ZpZGVyUHJvZmlsZSAtIERhZG9zIGRvIHBlcmZpbCBkbyBwcm92ZWRvclxuICogQHJldHVybnMge29iamVjdH0gUmVnaXN0cm8gZG8gcHJvdmVkb3IgdmluY3VsYWRvXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsaW5rUHJvdmlkZXJUb1VzZXIodXNlcklkLCBwcm92aWRlciwgcHJvdmlkZXJBY2NvdW50SWQsIHByb3ZpZGVyUHJvZmlsZSA9IHt9KSB7XG4gIGlmICghc3VwYWJhc2UpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTdXBhYmFzZSBjbGllbnQgbsOjbyBlc3TDoSBkaXNwb27DrXZlbCcpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdHJ5IHtcbiAgICAvLyBWZXJpZmljYXIgc2UgZXN0ZSBwcm92ZWRvciBqw6EgZXN0w6EgdmluY3VsYWRvXG4gICAgY29uc3QgeyBkYXRhOiBleGlzdGluZ1Byb3ZpZGVyLCBlcnJvcjogc2VsZWN0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndXNlcl9wcm92aWRlcnMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ3VzZXJfaWQnLCB1c2VySWQpXG4gICAgICAuZXEoJ3Byb3ZpZGVyJywgcHJvdmlkZXIpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoc2VsZWN0RXJyb3IgJiYgc2VsZWN0RXJyb3IuY29kZSAhPT0gJ1BHUlNUMTE2Jykge1xuICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyB2ZXJpZmljYXIgcHJvdmVkb3IgZXhpc3RlbnRlOicsIHNlbGVjdEVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmIChleGlzdGluZ1Byb3ZpZGVyKSB7XG4gICAgICAvLyBQcm92ZWRvciBqw6EgZXN0w6EgdmluY3VsYWRvXG4gICAgICByZXR1cm4gZXhpc3RpbmdQcm92aWRlcjtcbiAgICB9XG5cbiAgICAvLyBWaW5jdWxhciBub3ZvIHByb3ZlZG9yXG4gICAgY29uc3QgeyBkYXRhOiBsaW5rZWRQcm92aWRlciwgZXJyb3I6IGluc2VydEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3VzZXJfcHJvdmlkZXJzJylcbiAgICAgIC5pbnNlcnQoW1xuICAgICAgICB7XG4gICAgICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgICAgIHByb3ZpZGVyLFxuICAgICAgICAgIHByb3ZpZGVyX2FjY291bnRfaWQ6IHByb3ZpZGVyQWNjb3VudElkLFxuICAgICAgICAgIHByb3ZpZGVyX2VtYWlsOiBwcm92aWRlclByb2ZpbGUuZW1haWwsXG4gICAgICAgICAgcHJvdmlkZXJfbmFtZTogcHJvdmlkZXJQcm9maWxlLm5hbWUsXG4gICAgICAgICAgcHJvdmlkZXJfaW1hZ2U6IHByb3ZpZGVyUHJvZmlsZS5pbWFnZSxcbiAgICAgICAgfSxcbiAgICAgIF0pXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChpbnNlcnRFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJybyBhbyB2aW5jdWxhciBwcm92ZWRvcjonLCBpbnNlcnRFcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gbGlua2VkUHJvdmlkZXI7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJybyBlbSBsaW5rUHJvdmlkZXJUb1VzZXI6JywgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogT2J0w6ltIHRvZG9zIG9zIHByb3ZlZG9yZXMgdmluY3VsYWRvcyBhIHVtIHVzdcOhcmlvXG4gKiBAcGFyYW0ge3N0cmluZ30gdXNlcklkIC0gSUQgZG8gdXN1w6FyaW8gdW5pZmljYWRvXG4gKiBAcmV0dXJucyB7YXJyYXl9IExpc3RhIGRlIHByb3ZlZG9yZXMgdmluY3VsYWRvc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VXNlclByb3ZpZGVycyh1c2VySWQpIHtcbiAgaWYgKCFzdXBhYmFzZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGNsaWVudCBuw6NvIGVzdMOhIGRpc3BvbsOtdmVsJyk7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGE6IHByb3ZpZGVycywgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndXNlcl9wcm92aWRlcnMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAuZXEoJ3VzZXJfaWQnLCB1c2VySWQpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIGJ1c2NhciBwcm92ZWRvcmVzOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvdmlkZXJzIHx8IFtdO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gZW0gZ2V0VXNlclByb3ZpZGVyczonLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbi8qKlxuICogT2J0w6ltIHVtIHVzdcOhcmlvIHVuaWZpY2FkbyBwZWxvIGVtYWlsXG4gKiBAcGFyYW0ge3N0cmluZ30gZW1haWwgLSBFbWFpbCBkbyB1c3XDoXJpb1xuICogQHJldHVybnMge29iamVjdH0gVXN1w6FyaW8gdW5pZmljYWRvXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVbmlmaWVkVXNlckJ5RW1haWwoZW1haWwpIHtcbiAgaWYgKCFzdXBhYmFzZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGNsaWVudCBuw6NvIGVzdMOhIGRpc3BvbsOtdmVsJyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YTogdXNlciwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgndW5pZmllZF91c2VycycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnZW1haWwnLCBlbWFpbClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvciAmJiBlcnJvci5jb2RlICE9PSAnUEdSU1QxMTYnKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvIGFvIGJ1c2NhciB1c3XDoXJpbzonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gdXNlciB8fCBudWxsO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gZW0gZ2V0VW5pZmllZFVzZXJCeUVtYWlsOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIE9idMOpbSB1bSB1c3XDoXJpbyB1bmlmaWNhZG8gcGVsbyBJRFxuICogQHBhcmFtIHtzdHJpbmd9IHVzZXJJZCAtIElEIGRvIHVzdcOhcmlvIHVuaWZpY2Fkb1xuICogQHJldHVybnMge29iamVjdH0gVXN1w6FyaW8gdW5pZmljYWRvIGNvbSBzZXVzIHByb3ZlZG9yZXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVuaWZpZWRVc2VyQnlJZCh1c2VySWQpIHtcbiAgaWYgKCFzdXBhYmFzZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1N1cGFiYXNlIGNsaWVudCBuw6NvIGVzdMOhIGRpc3BvbsOtdmVsJyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YTogdXNlciwgZXJyb3I6IHVzZXJFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCd1bmlmaWVkX3VzZXJzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmVxKCdpZCcsIHVzZXJJZClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmICh1c2VyRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gYW8gYnVzY2FyIHVzdcOhcmlvOicsIHVzZXJFcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIXVzZXIpIHJldHVybiBudWxsO1xuXG4gICAgLy8gQnVzY2FyIHByb3ZlZG9yZXMgdmluY3VsYWRvc1xuICAgIGNvbnN0IHByb3ZpZGVycyA9IGF3YWl0IGdldFVzZXJQcm92aWRlcnModXNlcklkKTtcbiAgICB1c2VyLnByb3ZpZGVycyA9IHByb3ZpZGVycztcblxuICAgIHJldHVybiB1c2VyO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm8gZW0gZ2V0VW5pZmllZFVzZXJCeUlkOicsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIlNVUEFCQVNFX1VSTCIsInN1cGFiYXNlU2VydmljZUtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJzdXBhYmFzZSIsImdlbmVyYXRlVW5pZmllZElkIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsInJhbmRvbSIsIk1hdGgiLCJ0b1N0cmluZyIsInN1YnN0ciIsImdldE9yQ3JlYXRlVW5pZmllZFVzZXIiLCJlbWFpbCIsInByb2ZpbGUiLCJjb25zb2xlIiwiZXJyb3IiLCJkYXRhIiwiZXhpc3RpbmdVc2VyIiwic2VsZWN0RXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJzaW5nbGUiLCJjb2RlIiwidW5pZmllZElkIiwibmV3VXNlciIsImluc2VydEVycm9yIiwiaW5zZXJ0IiwidW5pZmllZF9pZCIsIm5hbWUiLCJzcGxpdCIsImF2YXRhcl91cmwiLCJpbWFnZSIsInVzZXJfaWQiLCJpZCIsInN5bmNfZW5hYmxlZCIsImF1dG9fbWVyZ2VfZHVwbGljYXRlcyIsInByaXZhY3lfbGV2ZWwiLCJsaW5rUHJvdmlkZXJUb1VzZXIiLCJ1c2VySWQiLCJwcm92aWRlciIsInByb3ZpZGVyQWNjb3VudElkIiwicHJvdmlkZXJQcm9maWxlIiwiZXhpc3RpbmdQcm92aWRlciIsImxpbmtlZFByb3ZpZGVyIiwicHJvdmlkZXJfYWNjb3VudF9pZCIsInByb3ZpZGVyX2VtYWlsIiwicHJvdmlkZXJfbmFtZSIsInByb3ZpZGVyX2ltYWdlIiwiZ2V0VXNlclByb3ZpZGVycyIsInByb3ZpZGVycyIsImdldFVuaWZpZWRVc2VyQnlFbWFpbCIsInVzZXIiLCJnZXRVbmlmaWVkVXNlckJ5SWQiLCJ1c2VyRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/unifiedUserUtils.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/jose","vendor-chunks/@supabase","vendor-chunks/openid-client","vendor-chunks/uuid","vendor-chunks/oauth","vendor-chunks/@panva","vendor-chunks/yallist","vendor-chunks/preact-render-to-string","vendor-chunks/tslib","vendor-chunks/iceberg-js","vendor-chunks/preact","vendor-chunks/oidc-token-hash","vendor-chunks/object-hash","vendor-chunks/lru-cache","vendor-chunks/cookie"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&page=%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fauth%2F%5B...nextauth%5D%2Froute.js&appDir=%2Fworkspaces%2FOneSelf%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fworkspaces%2FOneSelf&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();